// Generated by CoffeeScript 1.9.0
(function() {
  var config, exports, fs, get, logToArray, q;

  fs = require('fs');

  config = require('../../common/config');

  q = require('q');

  logToArray = require('./convertMessageHistoryData');

  get = function() {
    var deferred;
    deferred = q.defer();
    fs.readFile(config.logFile, 'utf8', function(err, data) {
      if (!err) {
        data = logToArray.convertToArray(data);
        return deferred.resolve(data);
      } else {
        return deferred.resolve({});
      }
    });
    return deferred.promise;
  };

  exports = this;

  exports.get = get;

}).call(this);
